
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Maintainable ASP.NET Webforms - Part II - Developer's Perception</title>
  <meta name="author" content="Nikolaj Kaare Nørskov">

  
  <meta name="description" content="In the last post I described how I believe that implementing the MVP pattern is a feasible way of improving ASP.NET Web Forms code:http://nikolajkn. &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://elgsdyret.github.io/blog/2012/09/08/maintainable-aspnet-webforms-part-ii">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Developer's Perception" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Developer's Perception</a></h1>
  
    <h2>Odd thoughts from a developer.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:elgsdyret.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Maintainable ASP.NET Webforms - Part II</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-09-08T13:36:00+02:00" pubdate data-updated="true">Sep 8<span>th</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><div class='post'>
<br /><br />In the last post I described how I believe that implementing the MVP pattern is a feasible way of improving ASP.NET Web Forms code:<br /><br /><a href="http://nikolajkn.blogspot.dk/2012/09/maintainable-aspnet-webforms-part-i.html">http://nikolajkn.blogspot.dk/2012/09/maintainable-aspnet-webforms-part-i.html</a><br /><br />The most important lesson is still that you should not use ASP.NET Web Forms unless you absolutely have to.<br /><br /><h4>The Example</h4>I have added a tiny example to github:&nbsp;<a href="https://github.com/elgsdyret/mvp-example">https://github.com/elgsdyret/mvp-example</a><br /><br />Like any contrived example it might be too simple and too silly to really show the power of implementing the pages this way, but here is a short walk-through of the flow anyways:<br />The view loads the presenter with a reference to itself and asks it to PresentAllDogs: <pre class="brush: c#">protected void Page_Load(object sender, EventArgs e)<br />{<br /> presenter = new DogSearchPresenter(this);<br /> presenter.PresentAllDogs();<br />}<br /></pre> The presenter then retrieves all the dogs (probably from some kind of data layer) and asks the view to render the dogs:  <pre class="brush: c#">public void PresentAllDogs()<br />{<br /> view.RenderDogs(Dog.All());<br />}<br /></pre> The view just assigns a local field with the values retrived (in some scenarios it might be doing a databind or similar, all depending on how the template aspx is used):  <script type="syntaxhighlighter" class="brush: c#"><![CDATA[ public void RenderDogs(IList<Dog> dogs) {  Dogs = dogs; } ]]></script> When the template is rendered it automatically renders the Dogs from the view:  <script type="syntaxhighlighter" class="brush: c#"><table> <tr><th>Name</th><th>Race</th></tr> <%foreach(var dog in Dogs)    { %>  <tr>   <td><%=dog.Name%></td>   <td><%=dog.Race%></td>  </tr>     <% } %></table></script> This way of rendering is my preferred as it puts just the right amount of rendering logic in the template. It does not work well if you need to manipulate specific rows of the table and have the viewstate handle which you clicked.  <br/><br/>For this you could use the listview control which is a decent compromise between using raw template rendering and having the view set values on elements using the runat server tag (I definetely prefer the first template rendering.)  <br/><br/>Happy coding!    </div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Alexander Beletsky</div>
<div class='content'>
Good stuff.<br /><br />There is ASP.NET MVP framework. <br /><br />http://aspnetmvp.codeplex.com/<br /><br />But I also still prefer lightweight custom solutions.</div>
</div>
</div>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Nikolaj Kaare Nørskov</span></span>

      








  


<time datetime="2012-09-08T13:36:00+02:00" pubdate data-updated="true">Sep 8<span>th</span>, 2012</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/asp-dot-net/'>ASP.NET</a>, <a class='category' href='/blog/categories/web-forms/'>Web Forms</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://elgsdyret.github.io/blog/2012/09/08/maintainable-aspnet-webforms-part-ii/" data-via="nikolaj_k_n" data-counturl="http://elgsdyret.github.io/blog/2012/09/08/maintainable-aspnet-webforms-part-ii/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/09/08/maintainable-aspnet-webforms-part-i/" title="Previous Post: Maintainable ASP.NET Webforms - Part I">&laquo; Maintainable ASP.NET Webforms - Part I</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/09/11/cors-vs-aspnet-session/" title="Next Post: CORS vs ASP.NET Session">CORS vs ASP.NET Session &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/05/27/porting-to-octopress/">Porting to Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/25/code-generation-in-net/">Code Generation in .NET</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/02/getting-started-with-go/">Getting Started With Go</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/22/working-effectively-with-aspnet-and/">Working Effectively With ASP.NET and HttpContext</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/03/24/playing-with-dynamic-keyword/">Playing With the Dynamic Keyword</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/elgsdyret">@elgsdyret</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'elgsdyret',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Nikolaj Kaare Nørskov -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
